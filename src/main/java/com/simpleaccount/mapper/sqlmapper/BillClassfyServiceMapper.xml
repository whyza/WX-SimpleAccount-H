<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.simpleaccount.mapper.BillClassfyMapper">

    <resultMap id="billClassfyMap" type="BillClassfyTree">
        <id property="classify" column="classify"></id>
        <result property="classfyName" column="classfyName"></result>
        <result property="fClassfyId" column="fClassfyId"></result>
        <result property="classifyImage" column="classifyImage"></result>
        <!--<collection property="ChildrenBillClassfy" ofType="BillClassfyTree" javaType="java.util.List" column="{classfyId=classfyId,userId=userId}"-->
        <!--select="queryBigBillClassfy"/>-->
    </resultMap>
    <select id="queryBigBillClassfy"  resultMap="billClassfyMap">
        SELECT b.classify,b.classfyName,b.classifyImage,b.fClassfyId,b.createtime,b.updatetime
        FROM billclassify as b
        WHERE b.fClassfyId IS NULL
        AND b.classifyType = #{classifyType}
  </select>
    <!--查找所有类别(递归)-->
    <select id="queryAllBillClassfy" resultType="com.simpleaccount.entry.Billclassify" parameterType="java.lang.Integer">
        SELECT b.classify,b.classfyName,b.classifyImage,b.fClassfyId,b.createtime,b.updatetime
        FROM billclassify as b
        WHERE b.fClassfyId = #{classfyId}
        AND (b.userId = 0 or b.userId= #{userId})
        AND b.classifyType = #{classifyType}
    </select>

</mapper>